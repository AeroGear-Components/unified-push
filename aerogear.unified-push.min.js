/*! AeroGear JavaScript Library - v1.5.2 - 2014-10-09
* https://github.com/aerogear/aerogear-js
* JBoss, Home of Professional Open Source
* Copyright Red Hat, Inc., and individual contributors
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
* http://www.apache.org/licenses/LICENSE-2.0
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
(function(e,t){this.AeroGear={},AeroGear.Core=function(){if(this instanceof AeroGear.Core)throw"Invalid instantiation of base class AeroGear.Core";this.add=function(e){var t,r,n=this[this.collectionName]||{};if(this[this.collectionName]=n,!e)return this;if("string"==typeof e)n[e]=AeroGear[this.lib].adapters[this.type](e,this.config);else if(Array.isArray(e))for(t=0;e.length>t;t++)r=e[t],"string"==typeof r?n[r]=AeroGear[this.lib].adapters[this.type](r,this.config):r.name&&(r.settings=AeroGear.extend(r.settings||{},this.config),n[r.name]=AeroGear[this.lib].adapters[r.type||this.type](r.name,r.settings));else{if(!e.name)return this;e.settings=AeroGear.extend(e.settings||{},this.config),n[e.name]=AeroGear[this.lib].adapters[e.type||this.type](e.name,e.settings)}return this[this.collectionName]=n,this},this.remove=function(e){var t,r,n=this[this.collectionName]||{};if("string"==typeof e)delete n[e];else if(Array.isArray(e))for(t=0;e.length>t;t++)r=e[t],"string"==typeof r?delete n[r]:delete n[r.name];else e&&delete n[e.name];return this[this.collectionName]=n,this}},AeroGear.isArray=function(e){return Array.isArray(e)},AeroGear.extend=function(){var e,t,r,n=arguments[0];for(t=1;arguments.length>t;t++){r=arguments[t];for(e in r)n[e]=r[e]}return n},function(){var r,n,o,i;(function(){var e={},t={};r=function(t,r,n){e[t]={deps:r,callback:n}},i=o=n=function(r){function o(e){if("."!==e.charAt(0))return e;for(var t=e.split("/"),n=r.split("/").slice(0,-1),o=0,i=t.length;i>o;o++){var s=t[o];if(".."===s)n.pop();else{if("."===s)continue;n.push(s)}}return n.join("/")}if(i._eak_seen=e,t[r])return t[r];if(t[r]={},!e[r])throw Error("Could not find module "+r);for(var s,a=e[r],c=a.deps,u=a.callback,f=[],l=0,p=c.length;p>l;l++)"exports"===c[l]?f.push(s={}):f.push(n(o(c[l])));var h=u.apply(this,f);return t[r]=s||h}})(),r("promise/all",["./utils","exports"],function(e,t){"use strict";function r(e){var t=this;if(!n(e))throw new TypeError("You must pass an array to all.");return new t(function(t,r){function n(e){return function(t){i(e,t)}}function i(e,r){a[e]=r,0===--c&&t(a)}var s,a=[],c=e.length;0===c&&t([]);for(var u=0;e.length>u;u++)s=e[u],s&&o(s.then)?s.then(n(u),r):i(u,s)})}var n=e.isArray,o=e.isFunction;t.all=r}),r("promise/asap",["exports"],function(r){"use strict";function n(){return function(){process.nextTick(s)}}function o(){var e=0,t=new f(s),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function i(){return function(){l.setTimeout(s,1)}}function s(){for(var e=0;p.length>e;e++){var t=p[e],r=t[0],n=t[1];r(n)}p=[]}function a(e,t){var r=p.push([e,t]);1===r&&c()}var c,u=e!==t?e:{},f=u.MutationObserver||u.WebKitMutationObserver,l="undefined"!=typeof global?global:this,p=[];c="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?n():f?o():i(),r.asap=a}),r("promise/cast",["exports"],function(e){"use strict";function t(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=this;return new t(function(t){t(e)})}e.cast=t}),r("promise/config",["exports"],function(e){"use strict";function r(e,r){return 2!==arguments.length?n[e]:(n[e]=r,t)}var n={instrument:!1};e.config=n,e.configure=r}),r("promise/polyfill",["./promise","./utils","exports"],function(t,r,n){"use strict";function o(){var t="Promise"in e&&"cast"in e.Promise&&"resolve"in e.Promise&&"reject"in e.Promise&&"all"in e.Promise&&"race"in e.Promise&&function(){var t;return new e.Promise(function(e){t=e}),s(t)}();t||(e.Promise=i)}var i=t.Promise,s=r.isFunction;n.polyfill=o}),r("promise/promise",["./config","./utils","./cast","./all","./race","./resolve","./reject","./asap","exports"],function(e,r,n,o,i,s,a,c,u){"use strict";function f(e){if(!x(e))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof f))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],l(e,this)}function l(e,t){function r(e){y(t,e)}function n(e){g(t,e)}try{e(r,n)}catch(o){n(o)}}function p(e,t,r,n){var o,i,s,a,c=x(r);if(c)try{o=r(n),s=!0}catch(u){a=!0,i=u}else o=n,s=!0;d(t,o)||(c&&s?y(t,o):a?g(t,i):e===U?y(t,o):e===O&&g(t,o))}function h(e,t,r,n){var o=e._subscribers,i=o.length;o[i]=t,o[i+U]=r,o[i+O]=n}function m(e,t){for(var r,n,o=e._subscribers,i=e._detail,s=0;o.length>s;s+=3)r=o[s],n=o[s+t],p(t,r,n,i);e._subscribers=null}function d(e,r){var n,o=null;try{if(e===r)throw new TypeError("A promises callback cannot return that same promise.");if(_(r)&&(o=r.then,x(o)))return o.call(r,function(o){return n?!0:(n=!0,r!==o?y(e,o):v(e,o),t)},function(r){return n?!0:(n=!0,g(e,r),t)}),!0}catch(i){return n?!0:(g(e,i),!0)}return!1}function y(e,t){e===t?v(e,t):d(e,t)||v(e,t)}function v(e,t){e._state===k&&(e._state=R,e._detail=t,A.async(b,e))}function g(e,t){e._state===k&&(e._state=R,e._detail=t,A.async(w,e))}function b(e){m(e,e._state=U)}function w(e){m(e,e._state=O)}var A=e.config;e.configure;var _=r.objectOrFunction,x=r.isFunction;r.now;var j=n.cast,T=o.all,P=i.race,C=s.resolve,G=a.reject,E=c.asap;A.async=E;var k=void 0,R=0,U=1,O=2;f.prototype={constructor:f,_state:t,_detail:t,_subscribers:t,then:function(e,t){var r=this,n=new this.constructor(function(){});if(this._state){var o=arguments;A.async(function(){p(r._state,n,o[r._state-1],r._detail)})}else h(this,n,e,t);return n},"catch":function(e){return this.then(null,e)}},f.all=T,f.cast=j,f.race=P,f.resolve=C,f.reject=G,u.Promise=f}),r("promise/race",["./utils","exports"],function(e,t){"use strict";function r(e){var t=this;if(!n(e))throw new TypeError("You must pass an array to race.");return new t(function(t,r){for(var n,o=0;e.length>o;o++)n=e[o],n&&"function"==typeof n.then?n.then(t,r):t(n)})}var n=e.isArray;t.race=r}),r("promise/reject",["exports"],function(e){"use strict";function t(e){var t=this;return new t(function(t,r){r(e)})}e.reject=t}),r("promise/resolve",["exports"],function(e){"use strict";function t(e){var t=this;return new t(function(t){t(e)})}e.resolve=t}),r("promise/utils",["exports"],function(e){"use strict";function t(e){return r(e)||"object"==typeof e&&null!==e}function r(e){return"function"==typeof e}function n(e){return"[object Array]"===Object.prototype.toString.call(e)}var o=Date.now||function(){return(new Date).getTime()};e.objectOrFunction=t,e.isFunction=r,e.isArray=n,e.now=o}),n("promise/polyfill").polyfill()}(),function(){var r=e!==t?e:exports,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=function(){try{document.createElement("$")}catch(e){return e}}();r.btoa||(r.btoa=function(e){for(var t,r,i=0,s=n,a="";e.charAt(0|i)||(s="=",i%1);a+=s.charAt(63&t>>8-8*(i%1))){if(r=e.charCodeAt(i+=.75),r>255)throw o;t=t<<8|r}return a}),r.atob||(r.atob=function(e){if(e=e.replace(/=+$/,""),1==e.length%4)throw o;for(var t,r,i=0,s=0,a="";r=e.charAt(s++);~r&&(t=i%4?64*t+r:r,i++%4)?a+=String.fromCharCode(255&t>>(6&-2*i)):0)r=n.indexOf(r);return a})}(),AeroGear.ajax=function(e){return new Promise(function(t,r){e=e||{};var n,o,i=new XMLHttpRequest,s=this,a=(e.type||"GET").toUpperCase(),c=(e.dataType||"json").toLowerCase(),u=(e.accept||"application/json").toLowerCase(),f=(e.contentType||"application/json").toLowerCase(),l=[],p=e.url,h=e.data;if(e.params)if("GET"===a||"POST"===a&&"application/x-www-form-urlencoded"===f)for(o in e.params)l.push(encodeURIComponent(o)+"="+encodeURIComponent(e.params[o]||""));else"application/json"===f&&(h=h||{},h.params=h.params||{},AeroGear.extend(h.params,e.params));if("application/x-www-form-urlencoded"===f){if(h)for(o in h)l.push(encodeURIComponent(o)+"="+encodeURIComponent(h[o]));h=l.join("&")}if("GET"===a&&l.length>0&&(p+="?"+l.join("&")),i.open(a,p,!0,e.username,e.password),i.responseType=c,i.setRequestHeader("Content-Type",f),i.setRequestHeader("Accept",u),e.headers)for(n in e.headers)i.setRequestHeader(n,e.headers[n]);i.onload=function(){var e=400>i.status?"success":"error",n=s._createCallbackArgs(i,e),o=s._createPromiseValue.apply(this,n);"success"===e?t(o):r(o),s._oncomplete(i,e,n)},i.onerror=function(){var e="error",t=s._createCallbackArgs(i,e);r(s._createPromiseValue.apply(this,t)),s._oncomplete(i,e,t)},this._createCallbackArgs=function(e,t){var r=e.statusText||t,n="text"===c||""===c?e.responseText:e.response;return[n,r,e]},this._createPromiseValue=function(e,t,r){return{data:e,statusText:t,agXHR:r}},this._oncomplete=function(t,r,n){e[r]&&e[r].apply(this,n||s._createCallbackArgs(t,r)),e.complete&&e.complete.call(this,"complete",t)},i.send(h)})},function(r){r.UnifiedPushClient=function(n,o,i){if(!n||!o||!i)throw"UnifiedPushClientException";return this instanceof r.UnifiedPushClient?(i="/"===i.substr(-1)?i:i+"/",this.registerWithPushServer=function(t){t=t||{};var s=t.metadata||{};if(!s.deviceToken)throw"UnifiedPushRegistrationException";return s.categories=Array.isArray(s.categories)?s.categories:s.categories?[s.categories]:[],r.ajax({contentType:"application/json",dataType:"json",type:"POST",url:i+"rest/registry/device",headers:{Authorization:"Basic "+e.btoa(n+":"+o)},data:JSON.stringify(s),success:t.success,error:t.error,complete:t.complete})},this.unregisterWithPushServer=function(t,s){return s=s||{},r.ajax({contentType:"application/json",dataType:"json",type:"DELETE",url:i+"rest/registry/device/"+t,headers:{Authorization:"Basic "+e.btoa(n+":"+o)},success:s.success,error:s.error,complete:s.complete})},t):new r.UnifiedPushClient(n,o,i)}}(AeroGear)})(this);
//@ sourceMappingURL=aerogear.js.map